input = """[{{{{{<([({{<[<>()][{}()]>{<{}{}>{[]{}}}}{({{}{}][<>{}])(<<>()><{}<>>)}}<[<({}())<{}{}>>[[()[]](<>[])]]<(
(<<({{({((([[{(){}}(<><>)][{[][]}<()()>>][[[()<>]<()()>]])))}(<(<[[{()<>}]({<>{}})]><<(<()[]>[[]{}])>[{{[
<{<{({[<{<{([<<><>>[()[]]])[<{[]<>}<<>()>>]}{{<(()<>)<(){}>>(<[]<>>)}[<[()[]]<<>{}>>[{{}{}}[<><>]]>}>({
[[[[[(<{(<<{<({}<>)<<><>>>{<<>()><<>()>]}<[<{}{}>{<>()}]<[{}[]][{}()]>>>[<({[]}{{}[]})<{<>{
[[{[<(<(<(({{<{}()>{{}<>}}[<()[]><<>{}>]}(<[{}[]][{}[]]><<<>{}><()<>>])))>[[(({[{}[]][{}{}]}{<<>()>[(){}]
<([[<<(([{<<{<[]><(){}>}<[{}][{}{}]>>{({{}()})[[[]()][()()]]}>}][<([[[{}{}][[]]]]<<<{}<>>{[][]
({(<{{([({[{(<{}<>><{}[]>)<<[][]>{[]{}}>}{[{{}[]}[{}{}]]{{{}[]}{(){}}}}]}>]){<<{((([<><>])([<>[]]{{}(
<{{{[{[(({<(<<{}{}>{<><>}>[{()[]}({}[])])([{()()}[<><>]](<{}()>({}())))><<(((){})[[]()])<(<>[
{{<({<<<{<<[[{{}{}}<()[]>]]<<[<>[]]([]{})>[[[]](<>())]>>(([{<><>}])[{{{}()}(<>[])}<{[]<>}[{}
{[<([[[(<[[[{[<>()]<()[]>}]{{{{}[]}{<>{}}}[([]())]}]<[({[]{}}(<>()>){<{}{}><()<>>}][((()[])[()[]])([()()]<[
[([([(<(({{[[((){})({}{})]]<({{}()})<<[]>[<>[]]>>}{({[()()]([][])}(([])[[]<>]))(<{{}{}}[(){}
({(<<({<<<(<[[[]()]]<[<>()]<()[]>}>[<<()()>>(<()[]>[[]])])({<<[]{}>{()[]}>({(){}}<<>[]>)}(<{(){}}<{}()>
<[((<[[{[<<[({[]<>}<<>()>)](<[<><>]>{[{}[]]<{}[]>})><<[[<>()]<[][]>]<[{}<>](<><>)>>{{[<>{}
<<<<<({[{[[[[<{}{}>]{((){}){<>[]}}][<([]{}){[]()}>[(<>())(<>[])]]]{{{<<>{}>({}())}(({}<>)[{}()])}}]({
<[({<((<<[{(<(()()){<><>}><({}{})(<>{})>){[[()<>){{}<>}]([<>()]<[]<>>)}}<<[<{}[]>((){})][{{}[]}{()
{([({{{<[<{{{[<><>>{[]()}}}(<((){})[<>[]]>(<[]<>>{{}<>}))}[[[[()()]<{}()>][[()<>]<{}[]>]]<<<[]()><()
[{{(<[{<<{[{(<()[]>({}{}))[(<>){[]{}}]}({<<>{}>{<>()}}<<[]<>>(()())>)]((<[[]()]{{}{}}>{<<>>{<>{
<[<{(<[({([({([]())([]())}({{}[]}{{}{}}))<{{{}{}}{{}()}}<[<>()][()()]>>]([[[{}{}][<><>]][[()<>]<{}{}>]
[[<<{{<[[{<{({<>[]}[()()])[{()[]}[[]<>]]}<({[]}((){})){[[]()]<<><>>}>>}])><<{(<{{<[]<>>(<><>)}[<<>{}
<([{[(<[<<[(({{}<>}{<><>})<{[]()}>)({{<><>><{}{}>}[([]())[{}()]])]>>[<[[[({}){[]()}][[()][
<<<{(<(<[{([[[[]()]<()<>>](<<>[]>[{}[]])])}<[({<<>{}>([]{})})]>]<[([[({}{})(())]{({}{})}]({(()[])}<<[]{}>[(
[{(([[({[({[[{()[]}<()<>>][[{}[]](<><>)]]((<{}<>>)({{}()}<()()>))}<{[[<>{}][[]()]]<[()()]{()
{(<({<({<{((({()()}<{}[]>)(<(){}>[()()])){<{{}[]}{<>{}}>[<<>{}>[[]<>]]})<(<[<>{}]<{}<>>><[{}][()<>]>)
<{{<<({{<<((<{[]}{()<>}><([][]){<>()}>)[{(<>())[<>[]]}{<<>()>(()())}])>((({{{}<>}<()()>}[(<>{})[
{<({({{[<<<{[({}{})<{}[]>](<[]<>>(<>[]))}>({{{<>[]}({}[])}([()<>]({}<>))})>>({<((<<><>>{[]()})
{[[(<{[<[([<[{{}}]((()<>){{}()})>(({<><>}{{}<>})<[[]]>)]<{[([][])[{}{}]](<[]{}><{}{}>}}[(([])[[]()])]>)]{(<<<
{{((<[<<[[<(({<>}){<<><>>[[]<>]})[{{()<>}<[]{}>}([(){}]<{}{}>)]>]{<{<{()()}{{}}>[{[]<>}>}[<([]()){<>[]
<{{[{[{[(({((<()()>({}<>)){((){})[[]{}]})}([{({}[])(()[])}[[<>{}]{(){}}]>)){(<<<{}>[<>()]>
[<<<[<{<[{(<[[{}[]]([]{})]{<{}{}>{[][]}}>)[([[{}<>]{<>{}}](<{}{}>[{}]))((<<>{}>)<{()()}[[]{}]>)]}]>
(<[<([{({{(([{[]<>}({}[])])<[({}())[{}{}]]{([][])({}<>)}>)<<<[<>{}]><({}<>)<<>()>>><{{()<>}[<>()]}(<<
<{({(<<<{{{[[(<>{}){<><>}][[{}[]]]]<<(<><>){{}<>}><{<>{}}<()<>>>>}[[[((){}){{}()}][{<><>}<()()>]]
<(<({{[[[<<(({{}{}}[<>[]]))(([<><>])<[{}()]<<>{}>>)>><({<<<>>[<>[]]><({}<>)<()[]>>}{(<<><>>{()<>})})>]]{{<
(<([([(<<[[<[<[]>)(([][])[<><>])>]<[({(){}}<{}{}>)[<[][]>{()[]}]][<<<>{}>{(){}}><(()[])[[][]]>]>][{[({[]<>}<{
{{<<<<<([<<((<{}{}>){{{}<>}<[][]]})(({{}()}<[]<>>)<<<>()>[[][]]>)>>])><(<{[{{[[]<>]<[][]>}}]}[<{(
([[<[<({(<<{<((){}][()()]>[<{}()>[<>()]]}{{[<>[]]}{{[][]}{[][]}}}>(({[<>()]{[][]}}(<[]<>>(<>())))<{<()()
[[[[<(<{{<[<([[]{}](()<>))<(<>[])[{}[]]>>{{(()<>)<{}{}>}{[()()][{}{}]}}]<[<<[]()>([]{})>{{
{<[{<[[{{{{{((<><>)[<>[]])([<>{}]([]()))}([[{}[]](())][({}{}){{}()}])}}{((<<[]><(){}>>)<<<{}<>>{[]{}}>((()<>)
<{[<[<{{((<<<[(){}](<>)>>{<[{}{}]<[]{}>>}>)([[{[[]<>][[][]]}(<<>()>(()<>))]>{(<[(){}][<>{}]>
([({[[{([(([({[]{}}(()()))<<{})>])<<<[<><>][(){}]>({[]}{{}()})>([({}[]){(){}}][<<><>>([][])])>)(<([<<>[
[(([[<{(<([({[[]{}]([]())}{<{}{}><[]<>>})(<<{}[]>[[]]>)][{<<[]{}>{{}<>})}([[()()][[]]]<<{}{}><{}{}>>)]
<[[(<<<<{<[{[<[]()>]<(<>[])[[]{}]>}]<<{({}<>)([]<>)}>(((<><>)(()()))<<[][]>(<>)>)>>(<{[[{}[]]<<>{}>]}>
<[<[{([<{(((([[]{}])<<<>()>[(){}]>)){<<[[]{}]{<>{}}>><[<()[]><[][]>]{[{}<>]<[][]>}>}){<{{[
<[{<{<[<[[{{{{[][]}[{}()]}(<[]><()[]>)}<((<>()){()[]})[(<>[])]>}({[[{}[]]{[][]}]}(<<<>()>{<>[]}>[{{}[]}{<><
<{{{<[[{<(((({[]{}}{[]{}})){[{()[]}({}{})]<<<>>(<>[])>})[(([(){}]<()<>>)({{}()}[{}{}]))<{({}[]){[]<>}}{[
<{{([<([(({<<{<>[]}{(){}}>{({}()){{}<>}}>}<(<{<>{}}(()()>><((){})(())>)({<[]><<>>})>)[[{{[
[{([[{<<{[(({{[][]}{{}[]}}[([]{}){()[]}]))({[[()()]][[<>()]{[]<>}]}{[({})[()<>]](<{}()]({}[]))})]}(<[<
{{[{<{[{<<<(({()[]})<<()<>>>)><{<<()()>{[]()}><({}{})<<>{}>>>{<(()())[(){}]><([]<>)[[][]]>}
<[[{{{{(<{<[[[[]()]<<>[]>][{{}{}}<[]()>]][[<{}{}>{{}<>}]{<<>{}>(())}]>{(({{}<>})[([][])<[]{}>]){{(<>{}){
{<<{<{(([(({(<[]<>>{[]<>})[<[]<>><[]{}>]})[<({()<>}{{}{}})((()[])<{}()>)><((())){<()()>{[]}}>])([({[<
<<[<{<{<((<[{[[]<>][()()]}({<>())[<>[]])][[(<>[])[(){}]]]>{{{<[][]>}{[[][]]<{}<>>}}((((){})<()()>)
([<([[(<([([<(()()){(){}}>{(<>())<[]()>}]{({[][]})}){[<(<>())[[]{}]><[{}<>][{}{}]>){(<()>)[<<>{
<[<(([{<[[[{<<<><>>(<>[]}>{{()}<[]()>}}{{<()>([]{})}<{<>[]}<{}[]>>}](<(<{}[]>{{}{}})[[<><>]<{}<>>]>{{<(){}
<{{<(<{<[<(<(<<>>)[<()()><<><>>]>{{<<><>>([]<>)}})(<[([][])][(<>())(<>{})]>{[(()<>)[<><>]]
[(([<<<[{{<{{{{}<>}([]<>)}<[{}[]][[]<>]>}([[[]{}][<><>]])><<[{{}}{[]<>}]<<{}[]>(()())>>[<[<><>]{<>()}>([()()]
{[{([([[[(([{<[]()>([][])}([{}()][{}<>])](<(()[])<[]()>>([[][]])))<(<<(){}><[]()>>{[{}<>]}}({(()())<[][]>}
((<(<{(<({(({([][])[[]{}]})<{<<>()>[<>()]}{[[]{}][[][]]}>){<({[][]}<{}{}>)<(<>())<{}[]>>>}}{{<
([{[<(<(({[[{({}{})[{}<>]}{{<><>}}]{(<()<>>(<>{}))}][([({}[]){<>[]}]{({})})<[{{}<>}(<>())]{(<>{})((){})}>]}
{[<<(<<[([[(<[()[]]([]())>{<<><>>{()()}})[((<>[])<()()>)<(()<>)<{}()>>]][[{[()](())}]]]{<(
(<(<<{{[[{<(({{}<>}{[]<>}){([]<>){[][]}}){(<{}()>{()})[<<>{}>]}>}({[(<<>[]>([]<>))]<[[[]<>]{[]<>
{(<<{<<[<{[{[<<>{}>([]{})]({<>[]]{()[]})}{[((){}){<>()}]{<[][]>([]<>)}}]<((<(){}>{()[]}){[<
<<({({(<[<{{(<(){}>{[]})(<<><>><()()>)}}[({([]){<>{}}}{<<>{}><()<>>})]>(([[(<>()){(){}}]([(){})(<>()))
{<[{(<([[{([<{[][]}([]{})>][([(){}])([[]<>](()[]))])[({[()<>][[]<>]}([<><>][<>[]])>]}]((<(((()
(<[[[[[({<[[<({}<>)>(({}[])[{}()])][<{{}[]}(<>{})><<[]{}>{[]{}}>]]<<[{[]()}<{}[]>]<([]())[<><>]>>>><{<(<[]<>
([[<(<[{<<<<({[]()}{()()})>><<{{<><>}<{}()>}(({}[])<<><>>)><({[]{}}{<>[]})<{[]{}}[[][]]>>>>>}(<[{([
((((({({<{([{{{}()}({}<>)}{<{}[]><{}()>}][(<<><>><<>[]>)[{()<>}]])([[[<>{}][()()]]({<>[]}<()(
<{[({{{{<{((({()<>}<{}<>>)[<[]{}>]){[<<>[]>[(){}]]})}<([<<{}{}>>{(()()){{}()}}][<<{}[]>[(){}]
[({(([({{[{[[(()[])<[]()>]([{}[]][(){}])]{[{()[]}([]<>)]<[<>[]][<>()]>}}<(<({}())(<><>)>(<[]<>>{[]<>}))(({
((<[<{[{<({{([<><>]<<>[]>)[[<>()]({}{})]}([{{}<>}[[]()]]{(<>{})({}<>)}]})<<{<[{}][{}]>[{[]
<(<({(([((<{([<>()]<[][]>)}<{{()<>}([][])}>>)){({[{{[]<>}(<>{})}{{()}<{}<>>}](((()<>)([][]))[{()<>}[()<>]
<([[({[[[({[[((){})(<>[])]][[((){})[{}{}]]([(){}][()<>])]})[[[(<[]<>>[{}[]])([[][]]<<>{}>)][{<[]{}>{<
(([<<[{{[<<<<{{}[]}<[]{}>>{[()<>]({}[])}>(({{}})<({}[])<()<>>>)>>]{{[(((()())<[]()>){[()<>]{<>()}}){
[{<([<({[<([{(<><>){()()}}{<<><>>({})]])<{[<[]()>[[]<>]]({[]()}<[]()>)}[[[(){}]((){})][[{}<>](
[[({{({([({(<{()()}(<>{})>{([]())<[]()>})[([<>[]]{{}()}){([]())[<><>]}]}{{[([][]}[[]]]{<<>(
<(<[({<<[([(<{[]<>}(<>())><([][])({}<>)>)<<{<>()}({}<>)><<{}<>>{()()}>>]({(<{}[]>([][])){<
<[<{<(<({(<[{<()[]>{{}[]}}]({[()()](()[])}{({}{})([]<>)})>({([{}[]][<>()])<<<>{}>({}<>)>}))}<[({<[(
[(<{{<{{(({<<{<>[]}([][])>><{[<>{}](<><>)}{[[]()]}>}((<({}{})<()[]>>)[<{<>[]}[{}<>]>]))({([
[[<[{<(<([([[<()<>>{<><>}]](<<[]()><<>>>[[()[]]({}{})]))])><[((({(()[])<()<>>}[<<>{}><[][]>])<<{(
<<{{<[{({<{<[[()<>][{}()>][({}<>)({}<>)]><<(<><>)[<><>]>>}([<{[][]}({}[])><({}{})>][(<<>()><
([[(([[<{(<{{(()()){[][]}}<{{}}[(){}]>}<{[(){}]<{}{}>}>>{{{{[]<>}(<>[])}[<(){}>([]())])[<[<>
{{(([{({((([[<[]{}>({}[])]({<>})]<[<[]()><[]<>>]({()<>](<>()))>){{[(<><>)[{}[]]][<<>{}>({}())]}(<<[][]>(<>()
({<<{<[{<[(({[<><>]}{{{}[]}[[]{}]}){{{{}[]}<<><>>][([]())(())]})[<<[[]<>]<{}{}>><<{}[]><{}[]>>>({[<>[]]
{[<({<(<[<([{{<>{}}{()<>}}([(){}]<[][]>)][(({}[]){()})([[][]]([]()))]>>]>)[<[(({[{{}[]}(()())]{<{}<>><[][]>}
[([{<{{<({<[({<>[]}{()()})(<[]{}>[()[]])]{{({}[])<()[]>}[([]<>)((){})]}>})[{<<<[{}[]][(){}]
{[[{<[<<[{<([[{}[]][{}()]]{[{}[]]{[]{}}})(({()<>}[{}()}){[[]{}]})>[{[<<>{}>]{({}<>)<{}{}>}}<{[[]<>]
[{{{<([(<[[[(<<>{}><<>[]>){([]<>){[]<>}}]({[[]<>](<><>)}({<>{}}{{}()}))]{(({{}{}}<{}[]>}<<<>>>)}]
{{<({(<(([<{{[()()]<[]<>>}}[<<[]{}>[<>()]>[(()())<<>>]]><<<{()()][<><>]>[<<><>>{()[]}]>{(<()[]>
{{<([<[[{<({{({}())<{}()>}{<{}()>[[][]]}>)<<[<<><>>{()[]}]<{[]<>}(()[])>>>>}([{[<{<>{}}({}())>((<>
[{[(<<(<[[[[({<>()}{<><>})]([<[][]><<>>])]{<({{}<>}[{}{}])[<{}<>><<><>>]>{[<<>[]><<>{}>]{[
((((<{{(<[{{{{()[]}[()<>]}[([]())[<>{}]]}{{[()()]<()<>>}<<<>{}><[]>>}}<((<<>>)[{[][]}<<>()>])<[<[]{}>(
<[<<[<{([(<(<(()())(()())>{(()[])<{}()>})({[[]()][[][]]})><{{{{}>[{}{}]}[<{}()>[(){}]]}{{{()()}{()[
<<<[(([([{<({<(){}>}{[()[]]{<>[]}})}{[(<[]{}>{{}()})({{}<>})]((<()[]>)<([]<>)>)}}({[{{<>()}{<>()}}(<(){}>[
{<<(({[[<<<{(({}{}}{<>[]})[{<>()}{()[]}]}(({<>[]}[{}{}]){{(){}}[()<>]})>[[<{[][]}[<>{}]>][[<()<>><()[]>]{
(([[<({{{({<[(()[])[[]{}]]>}[{(<[][]>[{}<>]){{[]{}}(<>()]}}({[[]()]}[<[][]>([]())])])}{{[{([{}()](<
[([<<({(([<<([[]{}]<()()>){<{}<>>[[]{}]}>[[<[]{}>(<><>)]{{(){}}[<><>]}]><({(<><>)(()())}{{(){}}((){}"""

input_test = """[({(<(())[]>[[{[]{<()<>>
[(()[<>])]({[<{<<[]>>(
{([(<{}[<>[]}>{[]{[(<()>
(((({<>}<{<{<>}{[]{[]{}
[[<[([]))<([[{}[[()]]]
[{[{({}]{}}([{[{{{}}([]
{<[[]]>}<{[{[{[]{()[[[]
[<(<(<(<{}))><([]([]()
<{([([[(<>()){}]>(<<{{
<{([{{}}[<[[[<>{}]]]>[]]"""


def first_star():
    global input
    input_list = input.split('\n')
    err = {')': 3, ']': 57, '}': 1197, '>': 25137}
    tab = {')': '(', ']': '[', '}': '{', '>': '<'}
    res = 0
    for x in input_list:
        stack = []
        for c in x:
            if c in "{[<(":
                stack.append(c)
            else:
                if len(stack) == 0 or stack.pop() != tab[c]:
                    res += err[c]
                    break
    print(f"First star: {res}")


def second_star():
    global input
    input_list = input.split('\n')
    err = {'(': 1, '[': 2, '{': 3, '<': 4}
    tab = {')': '(', ']': '[', '}': '{', '>': '<'}
    res = []
    for x in input_list:
        get_out = False
        score = 0
        stack = []
        for c in x:
            if c in "{[<(":
                stack.append(c)
            else:
                if len(stack) == 0 or stack.pop() != tab[c]:
                    get_out = True
                    break
        if get_out:
            continue
        while stack:
            score *= 5
            score += err[stack.pop()]
        if score:
            res.append(score)
    res = sorted(res)
    print(f"Second star: {res[len(res)//2]}")


if __name__ == '__main__':
    first_star()
    second_star()
